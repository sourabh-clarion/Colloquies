
<%= form_tag questions_path, :method => :get do %>   
 <p align="right"> <%= text_field_tag :search, params[:search] %>
  <%= submit_tag "Search", :name => nil %></p>
<% end %>

<p><%= paginate @questions %></p>

<%if user_signed_in?%>
  <h3><p>Welcome  <%= current_user.name%></p></h3>
<%end%>

<div class = "questions">
  <h2 class="question-heading">Questions</h2>  
  <% @questions.each do |question| %>
    <table width="100%" >
    <td width="80%"><li><%= link_to question.title, question_path(question.id)%></li>
      <div class="description" id="<%=question.id%>"><%= question.description.truncate(65, omission: '...(More)')%></div>
     <!-- <div id="panel_<%=question.id%>"><%= question.description%></div>  -->
      <p>Tags: <%= raw question.tag_list.map { |t| link_to t, tag_path(t) }.join(', ') %></p> 
      <% if user_signed_in? %>
        <% if policy(question).edit? %>
          <%= link_to "Edit", edit_question_path(question) %>
          <%= link_to "Delete", question_path(question.id), method: :delete %>
       <%end%>
      <%end%>
     </td>
    <td><%=question.view_count%> Views</td>
    <td><%= question.answers.where(is_active: true).count %>  Answers</td> 
    </table> 

    <style> 
      #panel_<%=question.id%>
      {
      text-align:center;
      }
      #panel_<%=question.id%>
      {
      height: auto;
      overflow:hidden;
      }
    </style>
  <% end %>

  <p><%= link_to("Add New Question",  new_question_path, :class => 'action new') %> </p>
</div>


<script> 
 </script>

